

## 목차

#### 1. [APP](#APP)
#### 2. [INGRESS](#INGRESS)

#### 3. [DB](#DB)

#### 4. [관리 서비스](#관리 서비스)

---

# 서비스 아키택쳐

![service_backend.png](images%2Fservice_backend.png)

위는 서비스에 관여하는 백엔드 구성요소 입니다.
위 그림에 표시되지 않은 관리용 서비스들은 [관리 서비스](#관리-서비스)를 참고해주세요.

아래의 표에 각 구성요소의 역할에 대한  대한 간략한 설명이 있습니다.

---

## 1. APP

| 항목                     | 구분                            | 내용                                                                                      |
| ---------------------- | ----------------------------- | --------------------------------------------------------------------------------------- |
| **WEB-API**            | - WAS <br>- SPRING BOOT       | - 주요 객체에 대한 CRUD operation 을 제공하는 api 입니다.<br>- 유저, 아티클, 댓글, 리액션 등이 주요 객체에 속합니다.<br>    |
| **SEARCH-API**         | - WAS <br>- SPRING BOOT       | - 아티클에 대한 리스트 요청을 제공하는 API 입니다.<br>- 검색, 인기글, 유사 문서 리스트 등의 API 를 제공합니다.<br>             |
| **Batch Job Consumer** | - BATCH<br>- SPRING BOOT <br> | - 비동기로 일괄 처리해야 하는 요청을 큐에 담았다가 별도 처리합니다.<br>- 조회수 update <br>- 알림 리소스 생성                 |
| **Es Sync Batch**      | - BATCH APP<br>- SPRING BOOT  | -  elasticsearch 에 article 의 내용을 싱크하는 앱입니다.<br>- 검색 컨텍스트에 따라서 openai api 를 호출할 수도 있습니다. |


---

## 2. INGRESS

| 항목                           | 구분                 | 내용                                                                              |
| ---------------------------- | ------------------ | ------------------------------------------------------------------------------- |
| **Nginx Ingress controller** | ingress controller | - hostname 기반으로 http 요청을 라우팅합니다. <br>- 접속 가능한 dns 네임리스트는 [네트워크 탭]()을 참고해주세요<br> |


---


## 3.  DB

| 항목                | 구분            | 내용                                                                                 |
| ----------------- | ------------- | ---------------------------------------------------------------------------------- |
| **Redis**         | 레디스           | - 다목적 redis 노드 하나에서 아래 작업 수행 <br>- 조회용 캐시<br>- 로그인 세션 유지<br>- 큐 이벤트 저장<br> -순번 채번용 |
| **Mysql**         | RDMS<br>      | - 단일 인스턴스 DB                                                                       |
| **Elasticsearch** | Elasticsearch | - 단일 인스턴스 DB<br>-  Elasticsearch for fulltext search  and vector search            |

---

##  4. 관리 서비스
| 항목      | 구분    | 내용                                             |
| ------- | ----- | ---------------------------------------------- |
| Grafana | 모니터링  | - 로그 검색용 loki dashboard 호스팅<br>- k8s 클러스터 모니터링 |
| Argocd  | 배포    | 서비스 포드 배포 관리                                   |
| Kibana  | es 관리 | - es 슬로쿼리 관리<br>- ingest pipeline 관리           |
